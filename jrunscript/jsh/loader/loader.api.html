<!--
LICENSE
This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not
distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.

END LICENSE
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:jsapi="http://www.inonit.com/jsapi">
<head>
	<title>jsh loader</title>
	<link rel="stylesheet" type="text/css" href="../../loader/api/api.css" />
	<script type="text/javascript" src="../../loader/api/api.js"></script>
</head>
<body>
	<div>
		<h1>Exports</h1>
		<script type="application/x.jsapi#initialize">
			scope.loadTestModule = function(path,context) {
				return $jsapi.loader.module("../../loader/" + path, context);
			}
		</script>
		<ul>
			<li class="function">
				<div class="name">plugins</div>
				<span>Loads <code>jsh</code> <a href="plugin.api.html">plugins</a> from a specified source.</span>
				<div class="arguments">
					<div class="label">Arguments</div>
					<ol>
						<li class="value">
							<span class="type"><a href="../../rhino/file/api.html#types.Pathname">Pathname</a></span>
							-or-
							<span class="type"><a href="../../rhino/file/api.html#types.Directory">directory</a></span>
							-or-
							<span class="type"><a href="../../loader/api.html#types.Loader">Loader</a></span>
							<div>
								A source, interpreted
								as follows:
								<ul>
									<li>
										If the pathname does not represent a directory or file which exists, do nothing.
									</li>
									<li>
										If a directory, or a pathname which is a directory, is specified,
										<ul>
											<li>
												and the directory has a <code>plugin.jsh.js</code> file, load the
												plugin from the directory.
											</li>
											<li>
												<!--	TODO	figure out what the method really should do; what it does do is
																counterintuitive.
												-->
												otherwise, the behavior is undefined.
											</li>
										</ul>
									</li>
									<li>
										If the pathname is an ordinary file,
										<ul>
											<li>
												and ends in <code>.slime</code>, load the plugin in SLIME format from the
												file.
											</li>
											<li>
												and ends in <code>.jar</code>, load the Java-only plugin.
											</li>
											<li>
												otherwise, do nothing.
											</li>
										</ul>
									</li>
									<li>
										If it is a <code>Loader</code>, plugins are loaded from that Loader.
									</li>
								</ul>
							</div>
						</li>
					</ol>
				</div>
				<script type="application/x.jsapi#tests">
					var global = (function() { return this; })();
					verify(global).evaluate.property("issue249").is(void(0));
					var directory = $jsapi.loader.getRelativePath("test/plugin").directory;
					verify(directory).directory.is(true);
					verify(directory).pathname.is.type("object");
					jsh.loader.plugins(directory);
					verify(global).evaluate.property("issue249").is.type("object");
					delete global.issue249;
				</script>
			</li>
		</ul>
	</div>
</body>
</html>
