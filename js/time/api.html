<!--
LICENSE
This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not
distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.

END LICENSE
-->
<html xmlns:jsapi="http://www.inonit.com/jsapi">
<head>
	<title>SLIME: time</title>
	<link rel="stylesheet" type="text/css" href="../../loader/api/api.css" />
	<script type="text/javascript" src="../../loader/api/api.js"></script>
</head>
<body>
	<div>
		<h1>Context</h1>
	</div>
	<script type="application/x.jsapi#initialize">
		//	TODO	better way to detect Java
		var old = {
			Day_month: true
		};
		try {
			var isJava = Packages;
			scope.module = $jsapi.loader.module(
				"module.js",
				Object.assign(
					$jsapi.loader.file("context.java.js"),
					{ old: old }
				)
			);
			scope.api = $jsapi.loader.module(
				"module.js",
				$jsapi.loader.file("context.java.js")
			);
		} catch (e) {
			scope.module = $jsapi.loader.module("module.js", { old: old });
			scope.api = $jsapi.loader.module("module.js");
		}
		scope.module.install();
	</script>
	<div jsapi:id="fifty">
		<script type="application/x.jsapi#tests">
			$jsapi.loader.fifty({
				path: "module.fifty.ts",
				verify: verify
			});
		</script>
	</div>
	<div>
		<h1>Exports</h1>
		<ul>
			<script type="application/x.jsapi#initialize">
				scope.Day = module.Day;

				scope.leapday = new scope.Day(2008,2,29);

				scope.leap09 = scope.leapday.addYears(1);

				scope.oldmas = new module.Day(1958,7,30);
				scope.katemas = new api.Day(1958,7,30);
			</script>
			<li class="constructor">
				<div class="name">Time</div>
				<div class="instances">
					<div class="label">Instances</div>
					<span class="type">__TYPE__</span>
					<span>__DESCRIPTION__</span>
					<div class="label">has properties:</div>
					<ul>
						<li class="value">
							<div class="name">day</div>
							<span class="type">__TYPE__</span>
							<span>__DESCRIPTION__</span>
						</li>
						<li class="value">
							<div class="name">time</div>
							<span class="type">__TYPE__</span>
							<span>__DESCRIPTION__</span>
						</li>
						<li class="function">
							<div class="name">local</div>
							<span>__DESCRIPTION__</span>
							<div class="arguments">
								<div class="label">Arguments</div>
								<ol>
								</ol>
							</div>
							<div class="returns">
								<div class="label">Returns</div>
								<span class="type">__TYPE__</span>
								<span>__DESCRIPTION__</span>
							</div>
						</li>
						<li class="function">
							<div class="name">format</div>
							<span>__DESCRIPTION__</span>
							<div class="arguments">
								<div class="label">Arguments</div>
								<ol>
								</ol>
							</div>
							<div class="returns">
								<div class="label">Returns</div>
								<span class="type">__TYPE__</span>
								<span>__DESCRIPTION__</span>
							</div>
						</li>
					</ul>
				</div>
				<script type="application/x.jsapi#tests">
					if (false) {
						//	Assumes Eastern time
						var fourAm = new module.Time({ day:new module.Day(2010,4,7), time: new module.Day.Time(4,0,0) });
						var localized = fourAm.local();
						var localUnix = 1270627200000;
						test(localized.unix == localUnix);
						test(fourAm.local(module.Time.Zone.UTC).unix == localUnix-4*60*60*1000);
					}
				</script>
			</li>
			<li class="constructor">
				<div class="name">When</div>
				<span>__DESCRIPTION__</span>
				<div class="arguments">
					<div class="label">Arguments</div>
					<ol>
						<li class="object">
							<span>__DESCRIPTION__</span>
							<div class="label">has properties:</div>
							<ul>
								<li class="value">
									<div class="name">unix</div>
									<span class="type">number</span>
									<span>__DESCRIPTION__</span>
								</li>
							</ul>
						</li>
					</ol>
				</div>
				<div class="instances">
					<div class="label">Instances</div>
					<span class="type">__TYPE__</span>
					<span>__DESCRIPTION__</span>
					<div class="label">has properties:</div>
					<ul>
						<li class="value">
							<div class="name">unix</div>
							<span class="type">number</span>
							<span>The number of milliseconds since epoch represented by this object.</span>
						</li>
						<li class="function">
							<div class="name">local</div>
							<span>__DESCRIPTION__</span>
							<div class="arguments">
								<div class="label">Arguments</div>
								<ol>
									<li class="value">
										<span class="type"><a href="#types.Time.Zone">Time.Zone</a></span>
										<span>__DESCRIPTION__</span>
									</li>
								</ol>
							</div>
							<div class="returns">
								<div class="label">Returns</div>
								<span class="type">__TYPE__</span>
								<span>__DESCRIPTION__</span>
							</div>
						</li>
					</ul>
				</div>
				<div class="label">has properties:</div>
				<ul>
					<li class="function">
						<div class="name">now</div>
						<span>__DESCRIPTION__</span>
						<div class="arguments">
							<div class="label">Arguments</div>
							<ol>
							</ol>
						</div>
						<div class="returns">
							<div class="label">Returns</div>
							<span class="type">__TYPE__</span>
							<span>__DESCRIPTION__</span>
						</div>
					</li>
					<li class="object">
						<div class="name">codec</div>
						<span>__DESCRIPTION__</span>
						<div class="label">has properties:</div>
						<ul>
							<li class="object">
								<div class="name">rfc3339</div>
								<span>__DESCRIPTION__</span>
								<div class="label">has properties:</div>
								<ul>
									<li class="function">
										<div class="name">encode</div>
										<span>__DESCRIPTION__</span>
										<div class="arguments">
											<div class="label">Arguments</div>
											<ol>
											</ol>
										</div>
										<div class="returns">
											<div class="label">Returns</div>
											<span class="type">__TYPE__</span>
											<span>__DESCRIPTION__</span>
										</div>
									</li>
									<li class="function">
										<div class="name">decode</div>
										<span>__DESCRIPTION__</span>
										<div class="arguments">
											<div class="label">Arguments</div>
											<ol>
											</ol>
										</div>
										<div class="returns">
											<div class="label">Returns</div>
											<span class="type">__TYPE__</span>
											<span>__DESCRIPTION__</span>
										</div>
									</li>
								</ul>
							</li>
						</ul>
					</li>
				</ul>
				<script type="application/x.jsapi#tests">
					var string = "2011-01-01T00:00:00Z";
					var when = module.When.codec.rfc3339.decode(string);
					var translated = when.local(module.Time.Zone.UTC).format("yyyy-mm-dd HR:mi:sc");
					test(translated == "2011-01-01 00:00:00");
				</script>
			</li>
		</ul>
	</div>
</body>
</html>
