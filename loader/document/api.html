<!--
LICENSE
This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not
distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.

The Original Code is the SLIME loader infrastructure.

The Initial Developer of the Original Code is David P. Caldwell <david@davidpcaldwell.com>.
Portions created by the Initial Developer are Copyright (C) 2013 the Initial Developer. All Rights Reserved.

Contributor(s):
END LICENSE
--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:jsapi="http://www.inonit.com/jsapi">
<head>
	<title>SLIME runtime: documents</title>
	<link href="../../loader/api/api.css" rel="stylesheet" type="text/css" />
	<script src="../../loader/api/api.js"></script>
</head>
<body>
	<div>
		<p>
			The SLIME document parser is a parser and serializer that handles HTML (and XHTML/XML) documents, converting them to a
			tree structure (which is somewhat analogous to a DOM tree).
		</p>
		<p>
			The produced tree conforms to the HTML DOM specification, so (for example) whitespace may be altered when parsing.
		</p>
		<!--
		<p>
			The base document format also contains features that DOM does not, standardizing processes like referencing another
			document and inserting content from the other document into a given document's rendering.
		</p>
		<p>
			This format is used for SLIME definition files, and is also provided as an API for potential use for other purposes.
		</p>
		-->
	</div>
	<script type="application/x.jsapi#initialize">
		var isBrowser = (function() {
			var global = this;
			return Boolean(global.window == global)
		})();
		var $slime = (function() {
			var global = this;
			if (global.jsh) return global.jsh.unit.$slime;
		})();
		scope.api = $jsapi.loader.module("module.js", {
			$slime: $slime
		});
	</script>
	<script type="application/x.jsapi#tests">
		//	This is not really a test of this module
		var resource = $jsapi.loader.get("test/data/1.html");
		verify(resource).is.type("object");
		var missing = $jsapi.loader.get("test/data/foo.html");
		verify(missing).is.type("null");
	</script>
	<script type="application/x.jsapi#initialize">
		scope.testsFor1 = function(page,verify) {
			verify(page).children.length.is(2);
			verify(page).children.get(0).doctype.is.type("object");
			verify(page).children.get(0).doctype.name.is.type("string");
			verify(page).children.get(0).doctype.name.is("html");

			verify(page).children.get(1).element.is.type("object");
			verify(page).document.element.is.type("object");
			verify(page).document.element.element.name.is("html");

			verify(page).document.element.element.attributes.get("class").is("class1");
			verify(page).document.element.element.attributes.get("foo").is(null);
		};
	</script>
	<script type="application/x.jsapi#tests">
		var page = api.load({
			loader: $jsapi.loader,
			path: "test/data/1.html"
		});
		testsFor1(page,verify);
	</script>
	<script type="application/x.jsapi#tests">
		var page = api.load({
			loader: $jsapi.loader,
			path: "test/data/1.html"
		});
		var string = page.serialize();
		//	TODO	below does not work in JSoup 1.12.1, which messes up some pieces of whitespace
		//	TODO	below does not work in browser, either
		//	See https://stackoverflow.com/questions/57394776/why-does-domparser-alter-whitespace
		var reparsed = api.load({
			string: string
		});
		testsFor1(reparsed,verify);
		if (false) {
			verify(string).is($jsapi.loader.string("test/data/1.html"));
		}
	</script>
	<div>__DESCRIPTION__</div>
	<div>
		<h1>Context</h1>
		<ul>
		</ul>
	</div>
	<div>
		<h1>Exports</h1>
		<ul>
		</ul>
	</div>
</body>
</html>