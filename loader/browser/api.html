<!--
LICENSE
The contents of this file are subject to the Mozilla Public License Version 1.1 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the License at http://www.mozilla.org/MPL/

Software distributed under the License is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, either
express or implied. See the License for the specific language governing rights and limitations under the License.

The Original Code is the SLIME loader for web browsers.

The Initial Developer of the Original Code is David P. Caldwell <david@davidpcaldwell.com>.
Portions created by the Initial Developer are Copyright (C) 2010 the Initial Developer. All Rights Reserved.

Contributor(s):
END LICENSE
-->
<html xmlns:jsapi="http://www.inonit.com/jsapi">
<head>
	<title>Browser slime loader</title>
</head>
<body>
	<div>
		The SLIME browser-based code loader.
	</div>
	<div>
		For configuration information, see <a href="#configuration">below</a>.
	</div>
	<div>
		<h1>Exports</h1>
		<ul>
			<li class="function">
				<div class="name">module</div>
				<span>Invokes the platform loader's <code>module</code> method.</span>
				<div class="arguments">
					<div class="label">Arguments</div>
					<ol>
						<li class="object">
							<div class="label">has properties:</div>
							<ul>
								<li class="value">
									<div class="name">base</div>
									<span class="type">string</span>
									<span>The base path from which to load files associated with the module.</span>
								</li>
								<li class="value">
									<div class="name">main</div>
									<span class="type">string</span>
									<span>The location of the module's main file.</span>
								</li>
							</ul>
						</li>
						<li class="object">
							The second argument to the platform loader's <code>module</code> method.
						</li>
					</ol>
				</div>
				<div class="returns">
					<div class="label">Returns</div>
					The return value of the platform loader's <code>module</code> method.
				</div>
			</li>
			<li class="function">
				<div class="name">script</div>
				<span>Invokes the platform loader's <code>script</code> method.</span>
				<div class="arguments">
					<div class="label">Arguments</div>
					<ol>
						<li class="value">
							<span class="type">string</span> The path from which to load the script.
						</li>
						<li class="value">
							The second argument to the platform loader's <code>script</code> method.
						</li>
					</ol>
				</div>
				<div class="returns">
					<div class="label">Returns</div>
					The return value of the platform loader's <code>script</code> method.
				</div>
			</li>
			<li class="function">
				<div class="name">namespace</div>
				<span>Invokes the platform loader's <code>namespace</code> method.</span>
				<script type="application/x.jsapi#tests">
					scope.test(typeof(window.foo) == "undefined");
					var ns = inonit.loader.namespace("foo.bar.baz");
					scope.test(ns == window.foo.bar.baz);
				</script>
				<script type="application/x.jsapi#tests" jsapi:id="top-level scope">
					var f = function() {
						return this;
					}

					var x = new function() {
						this.f = f;
					}

					scope.test(f() == window);
					scope.test(x.f() != window);
				</script>
			</li>
			<li class="value">
				<div class="name">base</div>
				<span class="type">string</span> The "base" URL of the module system: the URL from which the system was loaded.
			</li>
			<li class="object">
				<div class="name">nugget</div>
				Contains useful pieces of code that are exported for general use.
				<div class="label">has properties:</div>
				<ul>
					<li class="value">
						<div class="name">XMLHttpRequest</div>
						<div>The XMLHttpRequest constructor being used by this module.</div>
					</li>
					<li class="function">
						<div class="name">getCurrentScript</div>
						<div>
							Returns an object based on the current script being loaded (that is, the script from which the
							method is invoked).
						</div>
						<div class="returns">
							<div class="label">Returns</div>
							<div class="label">has properties:</div>
							<ul>
								<li class="value">
									<div class="name">base</div>
									<div>The base URL of this script: the URL of the script, excluding the file name.</div>
								</li>
								<li class="function">
									<div class="name">getRelativePath</div>
									<div class="arguments">
										<div class="label">Arguments</div>
										<ol>
											<li class="value"><span class="type">string</span> A relative path.</li>
										</ol>
									</div>
									<div class="returns">
										<div class="label">Returns</div>
										<div>A full path representing the specified relative path relative to the base URL
											of this script.</div>
									</div>
								</li>
							</ul>
						</div>
					</li>
				</ul>
			</li>
			<!--
			<li class="value">
				<div class="name">$sdk</div>
				(undocumented) Used to support development-related functions.
			</li>
			-->
		</ul>
	</div>
	<div>
		<h1><a name="configuration">Configuration</a></h1>
		<div>
			The <code>inonit.loader</code> module is configured specially, given that it bootstraps the module system. To configure
			the module, one must create a global <code>inonit</code> object with a <code>loader</code> property, and give that
			object properties. If this <code>inonit.loader</code> object is present, its properties are used to create the
			functioning <code>inonit.loader</code> object.
		</div>
		<div>
			The following properties are used:
			<ul>
				<li><code>debug(message)</code>: A one-argument function that is passed a string argument corresponding to a message
					this module would like to log. By default, this function does nothing, and so nothing is logged.</li>
				<li><code>XMLHttpRequest</code>: The implementation of <code>XMLHttpRequest</code> to use. By default, the
					implementation attempts to use the native implementation in the browser (including ActiveX implementations).
				</li>
			</ul>
		</div>
	</div>
</body>
</html>
