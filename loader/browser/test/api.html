<!--
LICENSE
This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not
distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.


The Original Code is the SLIME loader for web browsers.

The Initial Developer of the Original Code is David P. Caldwell <david@davidpcaldwell.com>.
Portions created by the Initial Developer are Copyright (C) 2016 the Initial Developer. All Rights Reserved.

Contributor(s):
END LICENSE
-->
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="../../../loader/api/api.css" />
		<script type="text/javascript" src="../../../loader/api/api.js"></script>
		<title>Testing: browser</title>
	</head>
	<body>
		<div>
			The SLIME browser testing environment allows SLIME <a href="../../api/unit.api.html">unit tests</a> to be run in a
			browser.
		</div>
		<div>
			<h1>Context</h1>
			<div class="label">has properties:</div>
			<ul>
				<li class="object">
					<div class="name">api</div>
					<span>__DESCRIPTION__</span>
					<div class="label">has properties:</div>
					<ul>
						<li class="value">
							<div class="name">unit</div>
							<span class="type">__TYPE__</span>
							<span>The <code>loader/api/unit.js</code> file.</span>
						</li>
					</ul>
				</li>
			</ul>
		</div>
		<div>
			<h1>Exports</h1>
			<div class="label">has properties:</div>
			<ul>
				<li class="function">
					<div class="name">target</div>
					<span>__DESCRIPTION__</span>
					<div class="arguments">
						<div class="label">Arguments</div>
						<ol>
							<li class="value">
								<!--
								<span class="type">__TYPE__</span>
								-->
								<span>A value to use as <code>this</code> when invoking tests.</span>
							</li>
						</ol>
					</div>
				</li>
				<li class="constructor">
					<div class="name">Scenario</div>
					<div class="type">
						<a class="type" name="types.test">test</a>
						<div>
							An object specifying a test. Its methods are executed in the following order:
							<!--	TODO	currently cannot use ol here because styling styles them like arguments	-->
							<ul>
								<li><code>setup</code>: Executes before the test; may be used to set up the test scenario.</li>
								<li><code>run</code>:
									Executes the test. May contain asynchronous calls; the test will wait for
									all calls to complete before proceeding.
								</li>
								<li><code>check</code>:
									Executes after the test; an argument is provided allowing the results of the test to be
									verified.
								</li>
								<li><code>cleanup</code>: Executes after the results are verified; allows the test to restore the
									pre-test state.
								</li>
							</ul>
							A test may have a <i>target</i>; if it does, all test methods will be invoked with the target as
							<code>this</code>.
						</div>
						<div class="label">has properties:</div>
						<ul>
							<li class="function">
								<div class="name">setup</div>
								<span>(optional; default is to do nothing)</span>
							</li>
							<li class="function">
								<div class="name">before</div>
								<span>
									(optional; default is to do nothing)
									Invoked before the test runs, allowing the test to check preconditions.
								</span>
								<div class="arguments">
									<div class="label">Arguments</div>
									<ol>
										<li class="value">
											<span class="type"><a href="../../api/unit.api.html#types.Verify">Verify</a></span>
											<span>
												An object that may be used to evaluate the preconditions for the test and communicate
												them back to the test framework.
											</span>
										</li>
									</ol>
								</div>
							</li>
							<li class="function">
								<div class="name">run</div>
								<span>(optional; default is to do nothing)</span>
							</li>
							<li class="function">
								<div class="name">check</div>
								<span>(optional; default is to do nothing)</span>
								<div class="arguments">
									<div class="label">Arguments</div>
									<ol>
										<li class="value">
											<span class="type"><a href="../../api/unit.api.html#types.Verify">Verify</a></span>
											<span>
												An object that may be used to evaluate the results of the test and communicate
												them back to the test framework.
											</span>
										</li>
									</ol>
								</div>
							</li>
							<li class="function">
								<div class="name">cleanup</div>
								<span>(optional; default is to do nothing)</span>
							</li>
						</ul>
					</div>

					<div class="type">
						<a class="type" name="types.Scenario">Scenario</a>
						<span class="type">supports <a href="../../api/unit.api.html#types.Scenario">Scenario</a></span>
						<span>__DESCRIPTION__</span>
						<div class="label">has properties:</div>
						<ul>
							<li class="function">
								<div class="name">target</div>
								<span>Sets the <i>target</i> - the <code>this</code> value - for the tests in this scenario.</span>
								<div class="arguments">
									<div class="label">Arguments</div>
									<ol>
										<li class="value">
											<span class="type">__TYPE__</span>
											<span>__DESCRIPTION__</span>
										</li>
									</ol>
								</div>
							</li>
							<li class="function">
								<div class="name">test</div>
								<span>Adds a test to the scenario.</span>
								<div class="arguments">
									<div class="label">Arguments</div>
									<ol>
										<li class="value">
											<span class="type"><a href="#types.test">test</a></span>
											<span>A test.</span>
										</li>
									</ol>
								</div>
							</li>
						</ul>
					</div>

					<span>__DESCRIPTION__</span>
					<div class="instances">
						<div class="label">Instances</div>
						<span class="type"><a href="#types.Scenario">Scenario</a></span>
						<span>__DESCRIPTION__</span>
					</div>
				</li>
				<li class="function">
					<div class="name">suite</div>
					<span>__DESCRIPTION__</span>
					<div class="arguments">
						<div class="label">Arguments</div>
						<ol>
							<li class="value">
								<span class="type">__TYPE__</span>
								<span>A single Suite object representing the tests to be run.</span>
							</li>
						</ol>
					</div>
				</li>
				<li class="deprecated function">
					<div class="name">test</div>
					<span>Creates a test and adds it to the list of tests that will be run.</span>
					<div class="arguments">
						<div class="label">Arguments</div>
						<ol>
							<li class="object">
								<span>__DESCRIPTION__</span>
								<div class="label">has properties:</div>
								<ul>
									<li class="function">
										<div class="name">edits</div>
										<span>__DESCRIPTION__</span>
										<div class="arguments">
											<div class="label">Arguments</div>
											<ol>
											</ol>
										</div>
										<div class="returns">
											<div class="label">Returns</div>
											<span class="type">__TYPE__</span>
											<span>__DESCRIPTION__</span>
										</div>
									</li>
									<li class="function">
										<div class="name">event</div>
										<span>__DESCRIPTION__</span>
										<div class="arguments">
											<div class="label">Arguments</div>
											<ol>
											</ol>
										</div>
										<div class="returns">
											<div class="label">Returns</div>
											<span class="type">__TYPE__</span>
											<span>__DESCRIPTION__</span>
										</div>
									</li>
									<li class="value">
										<div class="name">wait</div>
										<span class="type">__TYPE__</span>
										<span>__DESCRIPTION__</span>
									</li>
									<li class="function">
										<div class="name">tests</div>
										<span>__DESCRIPTION__</span>
										<div class="arguments">
											<div class="label">Arguments</div>
											<ol>
											</ol>
										</div>
										<div class="returns">
											<div class="label">Returns</div>
											<span class="type">__TYPE__</span>
											<span>__DESCRIPTION__</span>
										</div>
									</li>
								</ul>
							</li>
						</ol>
					</div>
					<div class="returns">
						<div class="label">Returns</div>
						<span class="type">__TYPE__</span>
						<span>__DESCRIPTION__</span>
					</div>
				</li>
			</ul>
		</div>
		<p>
			Upon load, the <code>initialize.js</code> script creates a global object that provides unit testing APIs, and adds a
			button to the HTML page that loads it that causes unit tests to be run. It also replaces the global
			<code>XMLHttpRequest</code> object.
			<!--	TODO	explain what replacement XMLHttpRequest does.	-->
		</p>
		<div>
			<h1><code>XMLHttpRequest</code></h1>
			<span>
				The <code>XMLHttpRequest</code> global function is replaced with one that keeps track of open requests. This
				function inserts each request into a list when it is created.
			</span>
			<div class="label">has properties:</div>
			<ul>
				<li class="object">
					<div class="name">asynchrony</div>
					<span>__DESCRIPTION__</span>
					<div class="label">has properties:</div>
					<ul>
						<li class="function">
							<div class="name">started</div>
							<span>__DESCRIPTION__</span>
							<div class="arguments">
								<div class="label">Arguments</div>
								<ol>
								</ol>
							</div>
							<div class="returns">
								<div class="label">Returns</div>
								<span class="type">__TYPE__</span>
								<span>__DESCRIPTION__</span>
							</div>
						</li>
						<li class="function">
							<div class="name">finished</div>
							<span>__DESCRIPTION__</span>
							<div class="arguments">
								<div class="label">Arguments</div>
								<ol>
								</ol>
							</div>
							<div class="returns">
								<div class="label">Returns</div>
								<span class="type">__TYPE__</span>
								<span>__DESCRIPTION__</span>
							</div>
						</li>
					</ul>
				</li>
			</ul>
		</div>
	</body>
</html>
