<!--
LICENSE
This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not
distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.

The Original Code is the SLIME loader infrastructure.

The Initial Developer of the Original Code is David P. Caldwell <david@davidpcaldwell.com>.
Portions created by the Initial Developer are Copyright (C) 2013 the Initial Developer. All Rights Reserved.

Contributor(s):
END LICENSE
--><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:jsapi="http://www.inonit.com/jsapi">
<head>
	<title>suite.jsh.js: Browser test suite runner</title>
	<!--	TODO	change these to use local copies of these files at the appropriate location	-->
	<!--
		These files are specified using http: rather than https: because githack.com will redirect them to https:, but http: will
		work when using an HTTP proxy to serve local copies of the files without needing to run https: locally
	-->
	<link href="../../../loader/api/api.css" rel="stylesheet" type="text/css" />
	<script src="../../..//loader/api/api.js"></script>
	<script>
		//	TODO	CORS
		document.domain = document.domain;
	</script>
</head>
<body>
	<div><code>suite.jsh.js</code> executes a <a href="api.html">browser test suite</a>.</div>
	<div>
		<h1>Arguments</h1>
		<ul>
			<li><code>-suite <i>file</i></code>: A suite to run.</li>
			<li><code>-definition <i>file</i></code>: A definition to run.</li>
			<li><code>-part <i>part</i></code>: What part of the definition to run. Implies <code>-interactive</code>.</li>
			<li><code>-parameter <i>name=value</i></code>: A query parameter to send to the suite or definition.</li>
			<li>
				<code>-browser</code>: Specifies that the tests should be run only in the default browser. If this option is not
				specified, the tests will be executed in every detected browser.
			</li>
			<li>
				<code>-interactive</code>: Whether to run the test suite interactively. The suite will only be run in one browser,
				which will stay open after running so that the page may be refreshed and the suite run again.
			</li>
			<li>
				<code>-chrome:instance <i>pathname</i></code>: Specifies the user data directory that will be used for Google Chrome
				if Chrome is one of the browser running the tests.
			</li>
			<li>
				<code>-view <i>view</i></code>: If <code>console</code>, the results of the test suite will be emitted to the
				<code>jsh</code> console. If <code>stdio</code>, the results of the test suite will be written to the standard
				output stream in such a way that they can be consumed by <code>jsh.unit.Suite.Fork</code>.
			</li>
		</ul>
	</div>
	<div jsapi:id="issue300">
		<script type="application/x.jsapi#tests" jsapi:id="success">
			jsh.shell.jsh({
				shell: jsh.shell.jsh.src,
				script: jsh.shell.jsh.src.getFile("loader/browser/test/suite.jsh.js"),
				arguments: [
					"-suite", jsh.shell.jsh.src.getFile("loader/browser/test/test/issue300.suite.js"),
					"-browser", "chrome"
				],
				evaluate: function(result) {
					verify(result).status.is(0);
				}
			})
		</script>
		<script type="application/x.jsapi#tests" jsapi:id="failure">
			jsh.shell.jsh({
				shell: jsh.shell.jsh.src,
				script: jsh.shell.jsh.src.getFile("loader/browser/test/suite.jsh.js"),
				arguments: [
					"-suite", jsh.shell.jsh.src.getFile("loader/browser/test/test/issue300.suite.js"),
					"-browser", "chrome",
					"-parameter", "failure=true"
				],
				evaluate: function(result) {
					verify(result).status.is(1);
				}
			})
		</script>
	</div>
	<div>
		<h1>Context</h1>
		<ul>
		</ul>
	</div>
	<div>
		<h1>Exports</h1>
		<ul>
		</ul>
	</div>
</body>
</html>