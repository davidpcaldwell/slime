<!--
LICENSE
This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not
distributed with this file, You can obtain one at http://mozilla.org/MPL/2.0/.

The Original Code is the SLIME portable MIME implementation.

The Initial Developer of the Original Code is David P. Caldwell <david@davidpcaldwell.com>.
Portions created by the Initial Developer are Copyright (C) 2013 the Initial Developer. All Rights Reserved.

Contributor(s):
END LICENSE
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:jsapi="http://www.inonit.com/jsapi">
<head>
	<title>SLIME MIME</title>
	<link rel="stylesheet" type="text/css" href="../loader/api/api.css" />
	<script src="../loader/api/api.js"></script>
</head>
<body>
	<script type="application/x.jsapi#initialize">
		scope.api = jsh.unit.$slime;
	</script>
	<div>A simple set of constructs that pertain to MIME that can run on any JavaScript engine.</div>
	<div>
		<h1>Exports</h1>
		<ul>
			<li class="constructor" jsapi:id="exports.Type">
				<div class="name"><a name="$exports.Type">Type</a></div>
				<div class="label">has properties:</div>
				<ul>
					<li class="function">
						<div class="name">fromName</div>
						<span>Attempts to determine the MIME type of a resource given its name.</span>
						<div class="arguments">
							<div class="label">Arguments</div>
							<ol>
								<li class="value">
									<span class="type">string</span>
									<span>A resource name.</span>
								</li>
							</ol>
						</div>
						<div class="returns">
							<div class="label">Returns</div>
							<span class="type"><a href="#types.type">type</a></span>
							<span>The type determined from the name, or <code>undefined</code> if the type cannot be determined.</span>
						</div>
						<script type="application/x.jsapi#tests">
							verify(api.mime).Type.fromName("foo.js").toString().is("application/javascript");
							verify(api.mime).Type.fromName("foo.f").is(void(0));
						</script>
					</li>
				</ul>
				<script type="application/x.jsapi#tests"><![CDATA[
					var throwsError = function(b,f,message) {
						if ($jsapi.debug && $jsapi.debug.disableBreakOnExceptions) {
							f = $jsapi.debug.disableBreakOnExceptions(f);
						}
						return new function() {
							this.success = function() {
								try {
									f();
									return !b;
								} catch (e) {
									return b;
								}
							};

							this.message = function(success) {
								if (!success) return "Should have errored.";
								return "Errored as expected.";
							}
						};
					};

					var a;
					var b = null;

					test(throwsError(true, function() {
						new api.mime.Type(a, "plain");
					}, "First argument undefined"));
					test(throwsError(true, function() {
						new api.mime.Type(b, "plain");
					}, "First argument null"));
					test(throwsError(true, function() {
						new api.mime.Type("text", a);
					}, "Second argument undefined"));
					test(throwsError(true, function() {
						new api.mime.Type("text", b);
					}, "Second argument null"));
					test(throwsError(true, function() {
						new api.mime.Type("text", "plain", 2);
					}, "Arguments contain number."));
					test(throwsError(false, function() {
						new api.mime.Type("text", "plain");
					}, "Arguments valid."));
					test(new api.mime.Type("text", "plain").toString() == "text/plain");
				]]></script>
			</li>
		</ul>
	</div>
</body>
</html>